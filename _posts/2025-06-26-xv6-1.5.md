---
layout: post
title:  "1.5 真实的世界"
category: "xv6-book"
order: "6"
---

# 1.5 真实的世界

Unix 对于 “标准” 文件描述符，管道，以及便捷的 Shell 操作语法的组合，对于编写通用目的的可重用的程序来说是一个巨大的进步。 这个想法带来了 “软件工具” 文化，而 Unix 的力量和流行度主要就归功于这种文化。Shell 也是第一个所谓的 “脚本语言” 。Unix 系统的接口今天仍在 BSD, Linux, macOS 等系统中存在着。

Unix 系统调用通过可移植操作系统接口（Portable Operating System Interface, POSIX）标准化了。xv6 没有遵循 POSIX，它缺少许多系统调用（包括例如 lseek 的基本接口），而且它的许多调用与标准行为不一致。xv6 的主要目标是简单和清除，从而提供一个类 UNIX 的系统调用案例。一些人使用了一些系统调用和简单 C 库扩展了 xv6，使得它可以运行基本的 Unix 程序。然而，现代内核相比于 xv6 提供了多得多的系统调用和服务。例如，它们支持网络，窗口系统，用户级线程，多种设备的驱动，等等。现代内核正在持续且快速地演化，并且提供了许多超出 POSIX 的特性。

Unix 使用文件-命名，以及文件-描述符接口就统一了多种资源（文件，目录，设备）。这个想法可以被扩展到更多的资源，Plan 9 就是一个很好的例子。Plan 9 将 “资源就是文件” 的概念应用到网络、图形和其他资源上。然而，大多数 Unix 派生的操作系统没有遵循这一路径。

文件系统和文件描述符是很有力的抽象。尽管如此，也有一些其他的操作系统接口模型。Multics，Unix 的前驱之一，将文件存储抽象成类似内存的概念，提供了一种风格非常不同的接口。而 Multics 设计的复杂性对 Unix 的设计者产生了直接影响，使 Unix 的设计者尽可能构建更简单的系统。

xv6 没有提供关于用户的概念，也没有对用户进行保护。在 Unix 看来，xv6 的进程都是以 root 权限执行的。

这本书讲述了 xv6 是如何实现类 Unix 的接口的，但是理念和概念可以应用到远不止 Unix。任何操作系统都需要为进程复用硬件资源，并隔离各个进程，以及提供进程间通信机制。学习了 xv6 之后，你应该能够研究其他更复杂的操作系统，以及理解 xv6 的概念是如何应用在这些系统中的。