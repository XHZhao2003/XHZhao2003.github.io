---
layout: post
title:  "1.1 什么是因特网？"
category: "计算机网络"
order: "2"
---


本书中，我们将现实中的因特网（Internet）作为讨论计算机网络的主要载体。那么因特网是什么？有两种方式来回答这个问题：

- 我们可以描述因特网的具体构成，也就是构成因特网的基础软硬件
- 我们可以将因特网描述为，为分布式应用提供服务的基础设施

#### 1.1.1 因特网的具体构成

首先，因特网连接了 PC，服务器，智能手机，平板电脑，甚至电视，游戏机等等设备。所有这些设备称为**主机**（host）或**端系统**（end system）。

端系统通过**通信链路**（communication link）和**分组交换机**（packet switch）相连。

通信链路可能是铜线、光纤、同轴电缆、无线电频谱。不同的链路具有不同的**传输速率**，单位通常是比特/秒（bps）。当端系统要发送数据时，端系统会将数据分段，并为每段附加一些说明信息，作为头部。这样形成的一个数据包称为一个分组（packet）。分组通过网络传输到目的地，然后重新组装成原始数据。

分组交换机会转发分组，从一条入通信链路接收分组，然后向一条出通信链路发送该分组。分组交换机主要包括两种：**路由器**（router）和**链路层交换机**（link-layer switch）。路由器主要用于网络核心中，而链路层交换机主要用于接入网中。

从发送端系统到接收端系统，一个分组会经历一些列通信链路和分组交换机，这称为该分组通过网络的**路径**（route or path）

用交通网络的比喻来理解因特网：工厂会将货物分组装箱，通过高速公路，公路，立交桥，到达目的仓库，然后卸下货物并把同一批货物放在一起。所以，分组就是卡车，链路就是高速公路和公路，分组交换机就是立交桥和叉口，端系统就是工厂和仓库。

端系统通过**因特网服务商**（Internet Service Provider, ISP）接入因特网，通常包括住宅区ISP，大学ISP，公司ISP，在机场酒店等公共场所提供 WiFi 的ISP，以及为移动设备提供蜂窝数据的 ISP。

ISP 的接入方式有多种：住宅区的宽带接入（线缆调制解调器 或 DSL），高速局域网接入，移动无线接入。ISP 也为内容提供者提供因特网接入服务，把服务器接入因特网。

因特网的目的就是要将端系统都连接起来，所以为端系统提供接入服务的 ISP 就需要互相连接。较低层的 ISP 经由较高层的 ISP （全国或跨国的 ISP）相连，而较高层的 ISP 则直接相连。高层的 ISP 是由高速光纤链路和高速路由器组成的。但无论高级或低级，每个 ISP 都是独立管理的，并运行 IP 协议，遵循命名和地址的惯例。

端系统，分组交换机，以及因特网的其他部件都运行着一些**协议**，从而来控制因特网中数据的收发行为。**传输控制协议（TCP）**和 **因特网协议（IP）** 是因特网中最重要的两个协议。所以因特网的主要协议统称为 TCP/IP。

因特网标准是由 IETF （因特网工程任务组）研发的。IETF 的标准文档称为 **RFC（Request For Comment，请求评论）**。TCP、IP、HTTP、SMTP 协议都是在这里定义的，目前已经有超过 9000 个 RFC。还有一些其他组织，例如 IEEE 802 LAN/MAN 标准化委员会指定了以太网和无线 WiFi 的标准。

![figure1.1](/assets/cn/figure1.1.png)*因特网中的部件*

#### 1.1.2 因特网的服务描述

因特网可以被描述成，为应用程序提供服务的基础设施。各种网络应用：即时通信、社交媒体、多人游戏，它们涉及多个相互交换数据的端系统，因而被称为**分布式应用**。这些应用只在端系统上运行，而不在网络核心中运行。

假如，你现在想要实现一个因特网应用，那么该如何做呢？由于应用只运行在端系统上，所以你会编写一些在端系统上运行的程序。这还是一个分布式程序，也就是在不同端系统上的程序会相互发送数据。这里就迎来了核心问题：一个端系统上的程序如何把数据巴松给另一个端系统上的程序？从这个角度上，因特网就是基础设施。

与因特网相连的端系统本身会提供**套接字接口（socket interface）**,套接字接口使得，端系统上的程序可以利用因特网基础设施，向另一个端系统上的特定程序交付数据。套接字接口也定义了一系列发送接收数据的规则。第 2 章中就会详细讨论。

用邮政做一个来比：Alice 想要向 Bob 发信。Alice 不能只是写了这封信（数据）就丢出窗外（直接发送到因特网中），而是要把信放进信封中，写上 Bob 的地址，贴上邮票，然后放到邮政信箱中。这就是邮政系统向 Alice 提供的接口的一系列规则。

同时，邮政系统提供的服务分很多种：快递，挂号信，普通邮件等。因特网也提供多种服务，不同的网络应用需要选择合适的网络服务。第 2 章中会介绍这些因特网服务。

#### 1.1.3 什么是协议？

##### 1. 人类活动的类比

![figure1.2](/assets/cn/figure1.2.png)*图 1.2：人类协议与计算机网络协议*

协议就是人们相互交流的方式。图 1.2 展示了一种典型的交流过程。人类协议要求一方首先进行问候（“Hi”），从而开始通信。对此的典型响应同样是 "Hi"，这表示对方能够继续交流；而一些其他响应（例如 "Don't bother me"）则可能表明无法进行交流，这种情况下发起方就不能继续对话了。有些时候，问的问题根本得不到任何回答，这时候通常应该放弃询问。

所以人类协议描述了，我们应该发送什么报文，以及收到应答报文或其他事件时我们应该采取的操作。两个人使用相同的沟通协议，那么他们就能够良好地沟通；反之，例如一个人讲礼貌而另一个人不讲礼貌，他们使用的沟通协议不同，他们的沟通就难以进行。

另一个人类类比是大学课堂。教授提问 "Any questions?"（发出一条信息，没有睡觉的学生都会收到这条信息），你举起了手（隐含地回复一条信息），教授示意你 “Yes? ....” ，然后你问出你的问题，教授收到这个问题，然后回复你。这就是 “question-answer” 协议，规定了教授和学生英高发送什么报文，以及在各种情况下应该采取的操作。

##### 2. 网络协议

网络协议与人类协议的区别在于，交换信息并采取行动的主体变成了软件或硬件，而不是人类。因特网中的所有活动，本质上都是两个及以上的实体按照某种协议进行通信。例如，拥塞控制协议规定了分组发送的速率；路由器中的协议决定了分组从源到目的地的路径。

图 1.2 的右半部分展示了一个简单的协议。当你向 Web 服务器发出请求（例如在浏览器中访问一个 URL），你的计算机会发送一条连接请求报文，并等待回答。Web 服务器收到连接报文，然后回复连接响应报文。你的计算机收到后，则在一条 GET 报文中发送想要访问的网页的名字。Web 服务器则返回这个网页文件。

所以，报文的交换以及发送和接收这些报文时采取的操作，是定义一个协议的关键元素。

**协议** 定义了两个通信实体之间信息交换的**格式**和**顺序**，以及对于收发消息或其他事件**所采取的行动**。



